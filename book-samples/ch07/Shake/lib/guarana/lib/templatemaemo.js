(function(){Nokia.TemplateMaemo=Nokia.Template.extend({footerIconicMenu:null,initialize:function(b){var a=this;var c={showFirstView:true};a.options=jQuery.extend(c,b);a._super.apply(a,[a.options]);a.viewManager=b.viewManager;a.createAnimatedMenu();a.setContent(Nokia.dom.parseHTML('<div class="nokia-template-content"></div>'));Nokia.dom.append(a.getContainer(),a.getContent());if(a.options.menu){a.setFooter(Nokia.dom.parseHTML('<div class="nokia-template-menu"></div>'));a.options.menu.element=Nokia.dom.parseHTML("<div></div>");a.iconicMenu=new Nokia.IconicMenu(a.options.menu);Nokia.dom.append(a.getFooter(),a.iconicMenu.getWrapper());Nokia.dom.append(a.getMenuWrapper(),a.getFooter())}else{a.getContent().addClass("nokia-template-content-no-footer")}a.views=a.viewManager.getViews();jQuery.each(a.views,function(e,d){d.setTemplate(a);d._renderUI(a.getContent())});a.viewManager.hideAll();if(a.options.showFirstView){a.viewManager.show(a.views[0])}},createAnimatedMenu:function(){var a=this;a.menuWrapper=Nokia.dom.parseHTML('<div class="nokia-template-menu-wrapper"></div>');a.menuTrigger=Nokia.dom.parseHTML('<a href="javascript:void(0);" class="nokia-template-menu-trigger"></a>');Nokia.dom.append(a.getContainer(),a.menuWrapper);Nokia.dom.append(a.getContainer(),a.menuTrigger);a.menuTrigger.click(function(){a.showMenu()});var b=[".nokia-template-menu-wrapper",".nokia-template-menu-content",".nokia-template-menu-trigger"].join(", ");jQuery(document.body).bind("click.menutemplatemaemo",function(c){if(!jQuery(c.target).is(b)){a.hideMenu()}})},showMenu:function(){var a=this;a.menuWrapper.animate({opacity:1,top:"1px",right:"5px",height:"418px",width:"104px"});a.menuTrigger.fadeOut()},hideMenu:function(){var a=this;a.menuWrapper.animate({opacity:0,top:"342px",right:"16px",height:"72px",width:"72px"});a.menuTrigger.fadeIn()},getMenuWrapper:function(){var a=this;return a.menuWrapper},getViewManager:function(){var a=this;return a.viewManager},getIconicMenu:function(){var a=this;return a.footerIconicMenu}})})();