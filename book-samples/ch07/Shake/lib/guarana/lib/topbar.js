(function(){Nokia.TopBar=Nokia.Widget.extend({initialize:function(b){var a=this;var c={};a.options=jQuery.extend(c,b);a.element=jQuery(a.options.element);a._super.apply(a,[a.options]);a.registerData("topbar");a._create();a.registerVibrationOn([]);a.fireCallback("create")},_create:function(){var a=this;var b=a.options;var c=a.Styles;a.wrapper=Nokia.dom.parseHTML('<div class="'+[c.topBar,c.clearFix,c.uiWidgetHeader].join(" ")+'"></div>');a.topContainer=Nokia.dom.parseHTML('<div class="'+[c.topContainer].join(" ")+'"></div>');Nokia.dom.append(a.wrapper,a.topContainer);Nokia.dom.append(a.element,a.wrapper);a.setItems(b.items)},setItems:function(b){var a=this;var c=a.Styles;a.topContainer.empty();jQuery.each(b,function(f,g){var d=g.navigable===false?false:true;var e;if(d){e=Nokia.dom.parseHTML('<a href="javascript:void(0);"></a>')}else{e=Nokia.dom.parseHTML("<span></span>")}e.addClass([c.topBarItem,c.topBarIcon,g.classname].join(" "));e.html(g.label);if(g.callback){e.unbind("click.topbar");e.bind("click.topbar",function(h){if(g.pressedStateClass){if(!g.keepPressed){e.addClass(g.pressedStateClass);setTimeout(function(){e.removeClass(g.pressedStateClass);g.callback.apply(g,[h])},100)}else{e.toggleClass(g.pressedStateClass);g.callback.apply(g,[h])}}else{g.callback.apply(g,[h])}});Nokia.util.bindEnter(e,function(){e.trigger("click.topbar")})}Nokia.dom.append(a.topContainer,e)})},Styles:{topBar:"nokia-topbar",topBarItem:"nokia-topbar-item",topBarIcon:"nokia-topbar-icon",topContainer:"nokia-topbar-container",clearFix:"ui-helper-clearfix",uiStateActive:"ui-state-active",uiWidgetHeader:"ui-widget-header"}})})();