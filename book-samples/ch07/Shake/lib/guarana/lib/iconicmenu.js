(function(){Nokia.IconicMenu=Nokia.Widget.extend({initialize:function(b){var a=this;var c={maximize:false,keepState:true};a.options=jQuery.extend(c,b);a.element=jQuery(a.options.element);a._super.apply(a,[a.options]);a.registerData("iconicmenu");a._create();a.registerVibrationOn([]);a.fireCallback("create")},_create:function(){var a=this,d=a.element,c=a.options,e=a.Styles,b=c.items;a.setItems(b);if(c.maximize){Nokia.util.maximize(d)}Nokia.util.addClass(d[0],[e.uiClearfix,e.uiStateDefault,e.iconicMenu].join(" "));a.wrapper=Nokia.dom.parseHTML('<div class="'+[e.iconicMenuItemsWrapper,e.uiClearfix].join(" ")+'"></div>');Nokia.dom.append(d,a.wrapper);jQuery.each(a.items,function(h,k){var g=Nokia.dom.parseHTML('<a href="javascript:void(0);" class="'+[e.iconicMenuItem].join(" ")+'"></a>');var l=Nokia.dom.parseHTML('<img src="'+a.items[h].icon+'" class="'+[e.iconicMenuImage].join(" ")+'" />');var f=Nokia.dom.parseHTML('<p class="'+[e.iconicMenuLabel].join(" ")+'">'+a.items[h].label+"</p>");Nokia.dom.append(g,l);Nokia.dom.append(g,f);var j=function(i){a.select(a.items[h],i);if(c.keepState&&a.items[h].activeIcon){Nokia.util.addClass(g[0],e.uiStateActive);l.attr("src",a.items[h].activeIcon);if(a.currentItemImage&&!a.equalsItems(a.currentItem,a.items[h])){Nokia.util.removeClass(a.currentItemContainer[0],e.uiStateActive);a.currentItemImage.attr("src",a.currentItem.icon)}}else{Nokia.util.removeClass(g[0],e.uiStateActive);l.attr("src",a.items[h].icon)}a.currentItem=a.items[h];a.currentItemImage=l;a.currentItemContainer=g};g.bind("click.iconicmenu",j);Nokia.util.bindEnter(g,j);g.hover(function(){Nokia.util.addClass(g[0],[e.iconicMenuSelected,e.uiStateHover].join(" "));if(a.items[h].hoverIcon&&!a.equalsItems(a.currentItem,a.items[h])){l.attr("src",a.items[h].hoverIcon)}},function(){Nokia.util.removeClass(g[0],e.iconicMenuSelected);Nokia.util.removeClass(g[0],e.uiStateHover);if(a.items[h].hoverIcon&&!a.equalsItems(a.currentItem,a.items[h])){l.attr("src",a.items[h].icon)}else{l.attr("src",a.items[h].activeIcon)}});Nokia.dom.append(a.wrapper,g)})},equalsItems:function(b,a){return b.label==a.label&&b.icon==a.icon&&b.hoverIcon==a.hoverIcon&&b.activeIcon==a.activeIcon},setItems:function(b){var a=this;a.items=b},select:function(d,c){var a=this,b=a.element;d.select.apply(a,[d,c])},Styles:{iconicMenu:"nokia-iconicmenu",iconicMenuItem:"nokia-iconicmenu-item",iconicMenuImage:"nokia-iconicmenu-image",iconicMenuLabel:"nokia-iconicmenu-label",iconicMenuSelected:"nokia-iconicmenu-item-selected",iconicMenuItemsWrapper:"nokia-iconicmenu-item-wrapper",uiClearfix:"ui-helper-clearfix",uiStateDefault:"ui-state-default",uiStateHighlight:"ui-state-active",uiStateHover:"ui-state-hover",uiStateActive:"ui-state-active"}})})();